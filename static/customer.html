<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Support - SupportGenie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/translations.js"></script>
    <script src="/js/voice-input.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        .message-enter {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .typing-indicator span {
            animation: blink 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes blink {

            0%,
            60%,
            100% {
                opacity: 0.3;
            }

            30% {
                opacity: 1;
            }
        }

        .chat-container {
            height: calc(100vh - 140px);
        }

        .messages-area {
            height: calc(100% - 80px);
        }
    </style>
</head>

<body class="bg-gray-100">

    <!-- Chat Interface -->
    <div class="flex flex-col h-screen">

        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-600 to-purple-800 text-white shadow-lg">
            <div class="container mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="text-2xl">ü§ñ</div>
                        <div>
                            <div class="text-xl font-bold">SupportGenie</div>
                            <div class="text-sm text-purple-200 flex items-center">
                                <span class="mr-2">üü¢</span>
                                <span>AI Assistant - Online</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div id="languageSelectorContainer"></div>
                        <a href="/" class="px-4 py-2 bg-purple-700 rounded-lg hover:bg-purple-900 transition">
                            üè† Home
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="flex-1 overflow-hidden bg-gray-50">
            <div class="container mx-auto max-w-4xl h-full flex flex-col">

                <!-- Messages -->
                <div id="messagesContainer" class="flex-1 overflow-y-auto p-6 space-y-4">
                    <!-- Messages will be loaded here -->
                </div>

                <!-- Typing Indicator -->
                <div id="typingIndicator" class="px-6 pb-4 hidden">
                    <div class="flex items-start space-x-3">
                        <div
                            class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white">
                            ü§ñ
                        </div>
                        <div class="bg-white rounded-2xl rounded-tl-none px-4 py-3 shadow-md">
                            <div class="typing-indicator flex space-x-1">
                                <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                                <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                                <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="bg-white border-t border-gray-200 p-4">
                    <div class="flex items-end space-x-3">
                        <button class="p-3 text-gray-400 hover:text-purple-600 transition">
                            üìé
                        </button>
                        <div class="flex-1">
                            <textarea id="messageInput" rows="1" placeholder="Type your message..."
                                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 resize-none"></textarea>
                        </div>
                        <button id="voiceInputBtn"
                            class="p-3 text-gray-600 hover:text-purple-600 transition rounded-lg hover:bg-purple-50"
                            title="Voice input">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </button>
                        <button id="sendBtn"
                            class="px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl font-semibold hover:from-purple-700 hover:to-purple-800 transition shadow-md">
                            ‚úàÔ∏è Send
                        </button>
                    </div>

                    <!-- Quick Actions -->
                    <div id="quickActions" class="flex flex-wrap gap-2 mt-3 hidden">
                        <button
                            class="action-btn px-4 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-semibold hover:bg-purple-100 transition"
                            data-action="return_product">
                            üîÑ Return Product
                        </button>
                        <button
                            class="action-btn px-4 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-semibold hover:bg-purple-100 transition"
                            data-action="create_ticket">
                            üé´ Create Ticket
                        </button>
                        <button
                            class="action-btn px-4 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-semibold hover:bg-green-100 transition"
                            data-action="request_call">
                            üìû Request Call
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">üëã</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Welcome to SupportGenie!</h2>
                <p class="text-gray-600">Let's get you started with AI support</p>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Your Name *</label>
                    <input type="text" id="customerName" placeholder="Enter your name"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500">
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Email (Optional)</label>
                    <input type="email" id="customerEmail" placeholder="your@email.com"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500">
                </div>

                <button id="startChatBtn"
                    class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-bold hover:from-purple-700 hover:to-purple-800 transition shadow-lg">
                    Start Chat üöÄ
                </button>
            </div>
        </div>
    </div>

    <!-- Action Confirmation Modal -->
    <div id="actionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 class="text-2xl font-bold mb-4" id="actionTitle">Confirm Action</h3>
            <p class="text-gray-600 mb-6" id="actionDescription">Are you sure you want to proceed?</p>

            <div id="actionForm" class="space-y-4 mb-6">
                <!-- Action-specific form fields will be added here -->
            </div>

            <div class="flex justify-end space-x-3">
                <button id="cancelAction"
                    class="px-6 py-2 bg-gray-200 rounded-lg font-semibold hover:bg-gray-300 transition">
                    Cancel
                </button>
                <button id="confirmAction"
                    class="px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition">
                    Confirm
                </button>
            </div>
        </div>
    </div>

    <script src="/js/customer.js"></script>
</body>

</html>